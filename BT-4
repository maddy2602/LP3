// SPDX-License-Identifier: Bhide License
pragma solidity ^0.8.0;

contract StudentRegistry {
    struct Student {
        int id;
        string name;
        string department;
    }

    // Mapping from student ID to Student
    mapping(int => Student) private students;
    int[] private studentIds; // To keep track of all IDs for counting

    // Event to log received Ether
    event ReceivedEther(address indexed sender, uint256 value);

    // Function to receive Ether
    receive() external payable {
        emit ReceivedEther(msg.sender, msg.value);
    }

    fallback() external payable {
        emit ReceivedEther(msg.sender, msg.value);
    }

    // Add a new student
    function addStudent(int id, string memory name, string memory department) public {
        require(bytes(students[id].name).length == 0, "Student ID already exists");
        students[id] = Student(id, name, department);
        studentIds.push(id);
    }

    // Get a student by ID
    function getStudent(int id) public view returns (int, string memory, string memory) {
        require(bytes(students[id].name).length != 0, "Student not found");
        Student memory s = students[id];
        return (s.id, s.name, s.department);
    }

    // Get total number of students
    function getStudentCount() public view returns (uint256) {
        return studentIds.length;
    }
}
